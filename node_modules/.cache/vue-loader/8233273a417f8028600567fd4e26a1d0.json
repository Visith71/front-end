{"remainingRequest":"C:\\Users\\User\\Documents\\front-end\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\User\\Documents\\front-end\\src\\components\\transactions\\TransactionListView.vue?vue&type=style&index=0&id=72d362dc&lang=css","dependencies":[{"path":"C:\\Users\\User\\Documents\\front-end\\src\\components\\transactions\\TransactionListView.vue","mtime":1658915537905},{"path":"C:\\Users\\User\\Documents\\front-end\\node_modules\\css-loader\\dist\\cjs.js","mtime":1658915600439},{"path":"C:\\Users\\User\\Documents\\front-end\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1658915603046},{"path":"C:\\Users\\User\\Documents\\front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":1658915600936},{"path":"C:\\Users\\User\\Documents\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658915600135},{"path":"C:\\Users\\User\\Documents\\front-end\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1658915601640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudHJhbnNhY3Rpb24tdGFibGUtaGVhZGVyIHsNCiAgZGlzcGxheTogZmxleDsNCiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQp9DQoudHJhbnNhY3Rpb24tdGFibGUtaGVhZGVyIGgxIHsNCiAgZm9udC1zaXplOiAxLjVlbTsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQoudHJhbnNhY3Rpb24tdGFibGUtaGVhZGVyLWxlZnQgew0KICB3aWR0aDogNjAlOw0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQp9DQoudHJhbnNhY3Rpb24tdGFibGUtaGVhZGVyLWxlZnQgaW5wdXQgew0KICB3aWR0aDogMzAlOw0KfQ0KLnRyYW5zYWN0aW9uLXRhYmxlLWhlYWRlci1sZWZ0IGlucHV0Om50aC1jaGlsZCgyKSB7DQogIG1hcmdpbi1sZWZ0OiAxZW07DQp9DQo="},{"version":3,"sources":["C:\\Users\\User\\Documents\\front-end\\src\\components\\transactions\\TransactionListView.vue"],"names":[],"mappings":";AAyOA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;EAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;EACnC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACZ;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAChD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAClB","file":"C:/Users/User/Documents/front-end/src/components/transactions/TransactionListView.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <ConfirmDialog></ConfirmDialog>\r\n  <div>\r\n    <div class=\"table-header transaction-table-header\">\r\n      <div class=\"transaction-table-header-left\">\r\n        <ClubAutoComplete \r\n          :getAllSportClubs=\"getAllSportClubs\"\r\n          @emitSelectedClub=\"getSelectedClub\"\r\n          :selected=\"selectedClub\"\r\n          @clearAutoComplete=\"clearAutoComplete\"\r\n          v-if=\"isAdmin\"\r\n        />\r\n        <input type=\"text\" class=\"table-search\" placeholder=\"üîé Search by transaction id...\" v-model=\"search\">\r\n\r\n        <input type=\"date\" class=\"table-search\" placeholder=\"üìÜ Filter Pitch by Created Date...\" v-model=\"searchDate\">\r\n      </div>\r\n      <h1 v-if=\"selectedClub && selectedClub.name\">{{ transactions.total }} transactions made by<br>{{ selectedClub.name }} üõí</h1>\r\n      <h1 v-else>{{ transactions.total }} Transactions Made üõí‚öΩ</h1>\r\n    </div>\r\n    <div class=\"table\">\r\n      <table>\r\n        <tr>\r\n          <th v-for=\"title in tableTitle\" :key=\"title\">\r\n            <div class=\"table-title\">\r\n              {{ title }}\r\n              <img class='disactive-ascen' @click=\"handleTransactionSort(title, $event)\" src=\"../../assets/icons/up-arrow.png\" alt=\"descendant-white\" ref=\"icon\">\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr v-for=\"transaction in filteredTransactions\" :key=\"transaction.id\" :transaction=\"transaction\">\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <p>{{ transaction.id }}</p>\r\n          </td>\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <h2>$ {{ transaction.payment_amount.toFixed(2) }}</h2>\r\n          </td>\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <p v-if=\"transaction.user.first_name && transaction.user.last_name\">{{ transaction.user.first_name }} {{ transaction.user.last_name }}</p>\r\n            <p v-else>No Username</p>\r\n          </td>\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <p>{{ transaction.play_date }}</p>\r\n          </td>\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <p><strong>{{ transaction.total_hours }}</strong> hours</p>\r\n          </td>\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <p>{{ format(new Date(transaction.createdAt), 'MMM do yyyy') }} {{ format(new Date(transaction.createdAt), 'HH:mm bbbb') }}</p>\r\n          </td>\r\n          <td @click=\"openTransaction(transaction)\">\r\n            <p>{{ transaction.payment_status }}</p>\r\n          </td>\r\n          <!-- <td>\r\n            <div class=\"action delete\">\r\n              <button @click=\"deleteTransaction(transaction)\">‚ùå</button>\r\n            </div>\r\n          </td> -->\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            <p><b>Total: </b></p>\r\n          </td>\r\n          <td>\r\n            <h2>$ {{calculateTotalPrice.toFixed(2)}}</h2>\r\n          </td>\r\n          <td></td>\r\n          <td></td>\r\n          <td><p><b>{{calculateTotalHours}} hours</b></p></td>\r\n          <td></td>\r\n          <td></td>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n  </div>\r\n\r\n  <ModalView v-if=\"openedTransaction\" @closeModal=\"openedTransaction = null\" mode=\"transaction-modal\" overlay=\"transaction-overlay\">\r\n   <TransactionDataView :transaction=\"openedTransaction\" @changeTransaction=\"changeTransaction\" />\r\n  </ModalView>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport ModalView from '../main-component/ModalView.vue'\r\nimport TransactionDataView from './TransactionDataView.vue'\r\nimport { format } from 'date-fns'\r\nimport ConfirmDialog from 'primevue/confirmdialog';\r\nimport {calculateTotal} from '../../composable/calculateTotal'\r\n\r\nexport default {\r\n  props: ['transactions', 'getAllSportClubs', 'selectedClub'],\r\n  components: {\r\n    ModalView,\r\n    TransactionDataView,\r\n    ConfirmDialog\r\n  },\r\n  data() {\r\n    return {\r\n      search: '',\r\n      filter: '',\r\n      searchDate: '',\r\n      getTransactionPagInfo: null,\r\n      isSortedDsec: false,\r\n      idTitleRef: null,\r\n      totalTitleRef: null,\r\n      nameTitleRef: null,\r\n      pdTitleRef: null,\r\n      bhTitleRef: null,\r\n      tdTitleRef: null,\r\n      pmsTitleRef: null,\r\n    }\r\n  },\r\n  setup() {\r\n    const tableTitle = ref([\r\n      'ID',\r\n      'Total Amount',\r\n      'Username',\r\n      'Play Date',\r\n      'Booking Hours',\r\n      'Transaction Date',\r\n      'Payment Status'\r\n      // 'Action'\r\n   ])\r\n    return { format, tableTitle, openedTransaction: ref(null) }\r\n  },\r\n  methods: {\r\n    handleTitleRef(curRef) {\r\n      let allTitleRef = [\r\n        this.idTitleRef,\r\n        this.totalTitleRef,\r\n        this.nameTitleRef,\r\n        this.pdTitleRef,\r\n        this.bhTitleRef,\r\n        this.tdTitleRef,\r\n        this.pmsTitleRef\r\n      ]\r\n      for (let i = 0; i < allTitleRef.length; i++) {\r\n        if (allTitleRef[i] !== curRef) {\r\n          allTitleRef[i] != null ? allTitleRef[i].classList.remove('is-dsec') : null\r\n        }\r\n      }\r\n    },\r\n    handleTransactionSort(title, e) {\r\n      let getTableTitle = ''\r\n      if (title == 'ID') {\r\n        getTableTitle = 'id'\r\n        this.idTitleRef = e.target\r\n        this.handleTitleRef(e.target)\r\n      } if (title == 'Total Amount') {\r\n        getTableTitle = 'payment_amount'\r\n        this.totalTitleRef = e.target\r\n        this.handleTitleRef(e.target)\r\n      } if (title == 'Play Date') {\r\n        getTableTitle = 'play_date'\r\n        this.pdTitleRef = e.target\r\n        this.handleTitleRef(e.target)\r\n      } if (title == 'Booking Hours') {\r\n        getTableTitle = 'total_hours'\r\n        this.bhTitleRef = e.target\r\n        this.handleTitleRef(e.target)\r\n      } if (title == 'Transaction Date') {\r\n        getTableTitle = 'createdAt'\r\n        this.tdTitleRef = e.target\r\n        this.handleTitleRef(e.target)\r\n      } if (title == 'Payment Status') {\r\n        getTableTitle = 'payment_status'\r\n        this.pmsTitleRef = e.target\r\n        this.handleTitleRef(e.target)\r\n      }\r\n\r\n      if (this.isSortedDsec == false) {\r\n        e.target.classList.add('is-dsec')\r\n        const transactionsSort = {\r\n          sortBy: [`${getTableTitle}`],\r\n          sortDesc: [true]\r\n        }\r\n        this.$emit('dispatchTransactionByPag', transactionsSort)\r\n        this.isSortedDsec = true\r\n      } else {\r\n        e.target.classList.remove('is-dsec')\r\n        this.$emit('dispatchTransactionByPag', {\r\n          sortBy: [`${getTableTitle}`],\r\n          sortDesc: [false]\r\n        })\r\n        this.isSortedDsec = false\r\n      }\r\n    },\r\n    openTransaction(transaction) {\r\n      this.openedTransaction = transaction;\r\n    },\r\n    changeTransaction({closeModal}) {\r\n      let transaction = this.openedTransaction\r\n      if(closeModal) {\r\n        this.openedTransaction = null\r\n      }\r\n    },\r\n    getSelectedClub(curValue) {\r\n      this.$emit('getSelectedClub', curValue)\r\n    },\r\n    clearAutoComplete() {\r\n      this.$emit('clearAutoComplete')\r\n    },\r\n  },\r\n  computed: {\r\n    isAdmin() {\r\n      return localStorage.getItem('roles') === 'ROLE_ADMIN' ? true : false\r\n    },\r\n    filteredTransactions() {\r\n      if (this.transactions && this.transactions.items) {\r\n        return this.transactions.items.filter((transaction) => {\r\n          let dateFormat = format(new Date(transaction.createdAt), 'yyyy-MM-dd');\r\n  \r\n          if(this.searchDate.length) {\r\n            return dateFormat.includes(this.searchDate.toLowerCase().trim())\r\n          }\r\n          if(this.search.length) {\r\n            return transaction.user.first_name.toLowerCase().includes(this.search.trim().toLowerCase()) || transaction.user.last_name.toLowerCase().includes(this.search.trim().toLowerCase()) || transaction.id.toString().includes(this.search.trim()) || transaction.payment_amount.toString().includes(this.search.trim()) || transaction.payment_status.toLowerCase().includes(this.search.trim().toLowerCase())\r\n          }\r\n          return transaction\r\n        })\r\n      }\r\n    },\r\n    calculateTotalPrice() {\r\n      return calculateTotal(this.transactions, 'payment_amount')\r\n    },\r\n\r\n    calculateTotalHours() {\r\n      return calculateTotal(this.transactions, 'total_hours')\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.transaction-table-header {\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: space-between;\r\n}\r\n.transaction-table-header h1 {\r\n  font-size: 1.5em;\r\n  text-align: right;\r\n}\r\n.transaction-table-header-left {\r\n  width: 60%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n}\r\n.transaction-table-header-left input {\r\n  width: 30%;\r\n}\r\n.transaction-table-header-left input:nth-child(2) {\r\n  margin-left: 1em;\r\n}\r\n</style>"]}]}